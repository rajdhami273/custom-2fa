#! /usr/bin/env node


const [n, [mxpRoot, command, ...rest]] = [process.argv.shift(), process.argv]

if (command == 'version') {
    console.log('Mapie version 1.0.3');
    process.exit();
}
if (command == 'create') {
    require('./../create')(rest);

} else {
    const fs = require('fs');
    if (!fs.existsSync('pie.json')) {
        console.log('Not an Mapie project');
        process.exit();
    }
    const pieJSON = fs.readFileSync('pie.json');
    process.env.rootDir = pieJSON.rootDir? process.cwd() + '/' +pieJSON.rootDir: process.cwd();

    switch (command) {

        case 'run':
            require('./../run')();

            break;


        case 'add':
            require('./../add')(rest);

            break;
    }


}
